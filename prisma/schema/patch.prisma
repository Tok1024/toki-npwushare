model patch {
  id                   Int      @id @default(autoincrement())
  unique_id            String   @unique @db.VarChar(8)
  name                 String   @db.VarChar(1007)
  vndb_id              String?  @unique @db.VarChar(107)
  banner               String   @default("") @db.VarChar(1007)
  introduction         String   @default("") @db.VarChar(100007)
  released             String   @default("unknown") @db.VarChar(107)
  content_limit        String   @default("") @db.VarChar(107)
  status               Int      @default(0)
  download             Int      @default(0)
  view                 Int      @default(0)
  resource_update_time DateTime @default(now())
  type                 String[]
  language             String[]
  engine               String[]
  platform             String[]

  user_id Int
  user    user @relation("user_patch", fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  tag             patch_tag_relation[]
  company         patch_company_relation[]
  favorite_folder user_patch_favorite_folder_relation[]

  alias       patch_alias[]
  rating      patch_rating[]
  rating_stat patch_rating_stat?

  resource patch_resource[] @relation("patch_resource")
  comment  patch_comment[]  @relation("patch_comment")

  created DateTime @default(now())
  updated DateTime @updatedAt
}

model patch_alias {
  id       Int    @id @default(autoincrement())
  name     String @db.VarChar(1007)
  patch_id Int
  patch    patch  @relation(fields: [patch_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  created DateTime @default(now())
  updated DateTime @updatedAt

  @@index([patch_id])
  @@index([name])
}
