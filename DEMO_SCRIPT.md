# 数据库原理实验大作业 - 演示脚本 (5分钟版)

## 🎯 演示核心目标
向助教展示系统如何通过数据库设计支持核心业务流程，重点体现：**CRUD操作**、**表关联查询**、**事务/状态流转**。

---

## ⏱️ 时间分配与流程 (总计 5:00)

### 1. 项目简介 (0:00 - 0:30)
- **话术**: "老师好，这是我的大作业 NWPUShare，一个基于 Next.js 和 MySQL 的课程资源共享平台。项目旨在解决校园内课程资料分散的问题。"
- **展示**: 首页 (Home)，快速滚动展示热门课程、最新资源。
- **数据库考点**: 
    - 首页数据来自 `Course` 表和 `Resource` 表的聚合查询。

### 2. 核心功能一：课程与资源浏览 (0:30 - 1:30)
- **操作**: 
    1. 点击导航栏 "课程" -> 选择一个学院 (如 "计算机学院")。
    2. 进入具体课程页 (如 "数据库原理")。
    3. 展示该课程下的 "资料列表" 和 "评论区"。
- **数据库考点 (边操作边解说)**:
    - "这里的课程层级结构体现了 `Department` (学院) 一对多 `Course` (课程) 的关系。"
    - "资源列表是通过 `Resource` 表的外键 `course_id` 进行关联查询的。"

### 3. 核心功能二：资源发布与事务 (1:30 - 3:00)
- **操作**:
    1. 点击右上角 "发布资源"。
    2. 填写表单：选择课程、输入标题、粘贴网盘链接。
    3. 点击 "提交"。
    4. **重点**: 展示跳转到了 "用户中心" -> "发布资源" 列表，且状态显示为 **"审核中" (Pending)**。
- **数据库考点**:
    - "这是一个典型的 **Create** 操作。为了保证数据质量，我们在数据库设计了 `status` 字段 (Draft/Pending/Published)。"
    - "当前记录已写入数据库，但因为 `status != 'published'`，普通用户在课程页还看不到，体现了视图层的数据过滤。"

### 4. 核心功能三：用户中心与聚合查询 (3:00 - 4:00)
- **操作**:
    1. 在用户中心页面停留。
    2. 展示 "我的积分"、"获赞数"、"发布的资源数"。
- **数据库考点**:
    - "这个页面展示了复杂的聚合查询能力。例如'发布的资源数'是对 `Resource` 表按 `author_id` 进行 `Count` 统计的结果。"
    - "用户信息存储在 `User` 表中，通过主键与其他业务表关联。"

### 5. 总结与技术栈 (4:00 - 5:00)
- **操作**: 快速展示一下代码中的 `prisma/schema.prisma` 文件 (如果允许) 或 简单的架构图。
- **话术**: 
    - "系统底层使用 Prisma ORM 操作 MySQL 数据库。"
    - "实现了完整的用户鉴权 (User表)、资源管理 (Resource表) 和 互动系统 (Comment表)。"
    - "以上就是我的演示，谢谢老师。"

---

## 💡 应对助教提问的 "小抄"

- **Q: 你的数据库ER图大概是什么样的？**
  - A: 核心是 `User` (用户), `Course` (课程), `Resource` (资源) 三大实体。`User` 和 `Resource` 是 1:N，`Course` 和 `Resource` 是 1:N。还有 `Comment` (评论) 关联 User 和 Resource/Course。

- **Q: 怎么处理并发或者数据一致性？**
  - A: 使用了 Prisma 的事务 (Transaction) 功能，确保在创建复杂关联数据时（比如发布资源同时增加用户积分），要么都成功，要么都回滚。

- **Q: 为什么用 Redis？**
  - A: 主要用于缓存热点数据（如首页课程列表）和存储用户的 Session/登录态，减轻 MySQL 的查询压力。
